<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>Розрахунок реагентів - Режим 1</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container mt-4">

    <h1>Розрахунок реагентів</h1>

    <!-- Перемикач режимів -->
    <nav class="mb-3">
        <a href="/?mode=mode1" class="btn btn-primary {% if mode == 'mode1' %}active{% endif %}">Режим 1</a>
        <a href="/?mode=mode2" class="btn btn-secondary {% if mode == 'mode2' %}active{% endif %}">Режим 2</a>
    </nav>

    <form method="post">
        <div class="mb-3">
            <label for="scale" class="form-label">Масштаб синтезу:</label>
            <select name="scale" id="scale" class="form-select" required>
                <option value="" disabled selected>Оберіть</option>
                <option value="праймер">Праймер</option>
                <option value="0.2мм">0.2 ммоль</option>
                <option value="1мм">1 ммоль</option>
                <option value="10мм">10 ммоль</option>
            </select>
        </div>

        <div class="row">
            {% for i in range(1,5) %}
            <div class="col-md-3 mb-3">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="use_seq{{ i }}" name="use_seq{{ i }}">
                    <label class="form-check-label" for="use_seq{{ i }}">Колонка {{ i }}</label>
                </div>
                <input type="text" class="form-control" name="sequence{{ i }}" placeholder="Послідовність {{ i }}">
            </div>
            {% endfor %}
        </div>

        <button type="submit" class="btn btn-success">Розрахувати</button>
    </form>

    {% if results %}
    <h2 class="mt-4">Результати</h2>

    <div class="row">
        {% for r in results %}
        <div class="col-md-6 mb-3">
            <div class="card">
                <div class="card-body">
                    <h5>Колонка {{ r.seq_num }}</h5>
                    <p><strong>Послідовність:</strong> {{ r.sequence }}</p>
                    <ul>
                        <li>A: {{ r.A }}%</li>
                        <li>T: {{ r.T }}%</li>
                        <li>G: {{ r.G }}%</li>
                        <li>C: {{ r.C }}%</li>
                        <li>Тетразол: {{ r.tetrazole }} мл</li>
                        <li>Кислотний ангідрид: {{ r.anhydride }} мл</li>
                        <li>NMI: {{ r.nmi }} мл</li>
                        <li>TCA: {{ r.tca }} мл</li>
                        <li>Йод: {{ r.iodine }} мл</li>
                        <li>Ацетонітрил: {{ r.acn }} мл</li>
                        <li>Молярна маса: {{ r.summmolarweight }} г/моль</li>
                    </ul>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <h3>Сумарна витрата реагентів:</h3>
    <ul>
        <li>A: {{ total.A }}%</li>
        <li>T: {{ total.T }}%</li>
        <li>G: {{ total.G }}%</li>
        <li>C: {{ total.C }}%</li>
        <li>Тетразол: {{ total.tetrazole }} мл</li>
        <li>Кислотний ангідрид: {{ total.anhydride }} мл</li>
        <li>NMI: {{ total.nmi }} мл</li>
        <li>TCA: {{ total.tca }} мл</li>
        <li>Йод: {{ total.iodine }} мл</li>
        <li>Ацетонітрил: {{ total.acn }} мл</li>
        <li>Молярна маса: {{ total.summmolarweight }} г/моль</li>
    </ul>
    {% endif %}

</div>
</body>
</html>